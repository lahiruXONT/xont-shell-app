<!-- Splash Screen -->
<div class="splash-screen" *ngIf="showSplashScreen()">
  <div class="splash-content">
    <div class="splash-logo">
      <img src="assets/img/ventura-logo.png" alt="Ventura CRM" />
    </div>
    <div class="splash-title">{{ title }}</div>
    <div class="splash-version">Version {{ version }}</div>
    <div class="splash-loader">
      <div class="loader-spinner"></div>
      <div class="loader-text">Loading...</div>
    </div>
  </div>
</div>

<!-- Main Application -->
<div
  class="app-container"
  [class.hidden]="showSplashScreen()"
  [class]="'theme-' + currentTheme()"
>
  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="isLoading()">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <div class="loading-text">Processing...</div>
    </div>
  </div>

  <!-- Authenticated Layout -->
  <app-main-layout
    *ngIf="isAuthenticated() && isInitialized()"
    [currentUser]="currentUser()"
    (userLogout)="onUserLogout()"
    (themeChanged)="onThemeChanged($event)"
    (businessUnitChanged)="onBusinessUnitChanged($event)"
  >
  </app-main-layout>

  <!-- Login/Unauthenticated View -->
  <div class="login-container" *ngIf="!isAuthenticated() && isInitialized()">
    <div class="login-card">
      <div class="login-header">
        <img
          src="assets/img/ventura-logo.png"
          alt="Ventura CRM"
          class="login-logo"
        />
        <h1>{{ title }}</h1>
        <p>Please sign in to continue</p>
      </div>

      <div class="login-form">
        <!-- Login form would go here -->
        <button
          type="button"
          class="login-demo-btn"
          (click)="
            onUserAuthenticated({ userName: 'demo', fullName: 'Demo User' })
          "
        >
          Continue as Demo User
        </button>
      </div>
    </div>
  </div>

  <!-- Router Outlet for additional routes -->
  <router-outlet></router-outlet>
</div>
