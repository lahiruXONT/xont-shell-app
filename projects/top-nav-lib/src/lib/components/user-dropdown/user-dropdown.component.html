<div class="user-dropdown-container">
  <!-- User Profile Section -->
  <div class="user-profile">
    <div class="user-avatar-container">
      <img
        [src]="user?.profilePicture"
        [alt]="user?.fullName"
        class="user-avatar"
        (error)="setDefaultImage($event)"
        *ngIf="user?.profilePicture"
      />
      <div class="user-avatar-initials" *ngIf="!user?.profilePicture">
        {{ getInitials(user?.fullName || user?.userName || "") }}
      </div>
    </div>
    <div class="user-info">
      <h4 class="user-name">
        {{ user?.fullName || user?.userName || "User" }}
      </h4>
      <p class="user-email">{{ user?.email }}</p>

      <div class="user-status" *ngIf="user?.lastLogin as lastLogin">
        <small>Last login: {{ formatDate(lastLogin) }}</small>
      </div>
    </div>
  </div>

  <!-- Theme Selection -->
  <div class="theme-selection">
    <label class="theme-label">Theme:</label>
    <div class="theme-options">
      <button
        *ngFor="let theme of themes"
        type="button"
        class="theme-option"
        [class.active]="currentTheme === theme"
        [class]="getThemeClass(theme)"
        (click)="onThemeChange(theme)"
        [title]="theme.charAt(0).toUpperCase() + theme.slice(1)"
      >
        {{ theme.charAt(0).toUpperCase() }}
      </button>
    </div>
  </div>

  <!-- User Actions -->
  <div class="user-actions">
    <button type="button" class="dropdown-item" (click)="onProfileClick()">
      <i class="fa fa-user"></i>
      <span>Profile</span>
    </button>
    <button type="button" class="dropdown-item" (click)="onSettingsClick()">
      <i class="fa fa-cog"></i>
      <span>Settings</span>
    </button>
    <button type="button" class="dropdown-item logout" (click)="onLogout()">
      <i class="fa fa-sign-out"></i>
      <span>Logout</span>
    </button>
  </div>
</div>
