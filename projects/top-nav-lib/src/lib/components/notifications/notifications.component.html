<div class="notifications-panel-container">
  <div class="notifications-header">
    <div class="notifications-title">
      <i class="fa fa-bell"></i>
      <h3>Notifications</h3>
    </div>
    <div class="notifications-actions">
      <button
        type="button"
        class="btn btn-sm btn-secondary"
        (click)="onToggleView()"
        *ngIf="allCount() > 0"
      >
        {{ showAllSignal() ? "Show Unread" : "Show All" }} ({{ allCount() }})
      </button>
      <button
        type="button"
        class="btn btn-sm btn-secondary"
        (click)="onMarkAllRead()"
        *ngIf="hasUnread()"
      >
        Mark All Read
      </button>
      <button
        type="button"
        class="btn btn-sm btn-danger"
        (click)="onClearAll()"
      >
        Clear All
      </button>
    </div>
  </div>

  <div
    class="notifications-list"
    *ngIf="notifications().length > 0; else noNotifications"
  >
    <div
      *ngFor="let notification of notifications(); trackBy: trackById"
      class="notification-item"
      [class.unread]="!notification.isRead"
      [class]="getTypeClass(notification.type)"
      (click)="onNotificationClick(notification)"
    >
      <div class="notification-icon">
        <i class="fa" [class]="getPriorityIcon(notification.priority)"></i>
      </div>
      <div class="notification-content">
        <div class="notification-header">
          <h4>{{ notification.title }}</h4>
          <span class="notification-time">{{
            formatDate(notification.createdAt)
          }}</span>
        </div>
        <p class="notification-message">{{ notification.message }}</p>
        <div
          class="notification-meta"
          *ngIf="notification.actionLabel && notification.actionUrl"
        >
          <span class="notification-action">{{
            notification.actionLabel
          }}</span>
        </div>
      </div>
      <div class="notification-status" *ngIf="!notification.isRead">
        <span class="unread-indicator"></span>
      </div>
    </div>
  </div>

  <ng-template #noNotifications>
    <div class="no-notifications">
      <i class="fa fa-bell-slash"></i>
      <p>No notifications to show</p>
    </div>
  </ng-template>

  <div class="notifications-footer" *ngIf="allCount() > 0">
    <button
      type="button"
      class="btn btn-sm btn-link"
      (click)="onClearRead()"
      *ngIf="!showAllSignal()"
    >
      Clear Read Notifications
    </button>
  </div>
</div>
